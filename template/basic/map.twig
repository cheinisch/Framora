<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Leaflet Styles & Scripts -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

<!-- MarkerCluster Styles & Scripts -->
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
</head>
  <body class="h-full">
    <div class="flex min-h-full flex-col">
      <header class="mx-auto w-full max-w-7xl px-6 pt-6 lg:px-8">
        <nav class="flex items-center justify-between" aria-label="Global">
          <div class="flex lg:flex-1">
            <a href="/" class="flex items-center gap-2 -m-1.5 p-1.5">
              <img class="h-8 w-auto" src="https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=indigo&shade=600" alt="{{ site_title }}">
              <span class="text-lg font-semibold text-gray-900">{{ site_title }}</span>
            </a>
          </div>
          <div class="flex lg:hidden">
            <button id="menu-open" type="button" class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700">
              <span class="sr-only">Open main menu</span>
              <!-- Hamburger Icon -->
              <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
              </svg>
            </button>
          </div>
          <div class="hidden lg:flex lg:gap-x-12">
            <a href="/blog" class="text-sm/6 font-semibold text-gray-900">Blog</a>
            <a href="/timeline" class="text-sm/6 font-semibold text-gray-900">Timeline</a>
            <a href="/map" class="text-sm/6 font-semibold text-gray-900">Map</a>
            <a href="#" class="text-sm/6 font-semibold text-gray-900">Company</a>
          </div>
        </nav>
        <!-- Mobile menu, show/hide based on menu open state. -->
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="fixed inset-0 z-10 hidden overflow-y-auto bg-white px-6 py-6 lg:hidden">
          <div class="flex items-center justify-between">
            <a href="/" class="flex items-center gap-2 -m-1.5 p-1.5">
              <img class="h-8 w-auto" src="https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=indigo&shade=600" alt="{{ site_title }}">
              <span class="text-lg font-semibold text-gray-900">{{ site_title }}</span>
            </a>
            <button id="menu-close" type="button" class="-m-2.5 rounded-md p-2.5 text-gray-700">
              <span class="sr-only">Close menu</span>
              <!-- Close Icon -->
              <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div class="mt-6 flow-root">
            <div class="-my-6 divide-y divide-gray-500/10">
              <div class="space-y-2 py-6">
                <a href="/blog" class="-mx-3 block rounded-lg px-3 py-2 text-base/7 font-semibold text-gray-900 hover:bg-gray-400/10">Blog</a>
                <a href="/timeline" class="-mx-3 block rounded-lg px-3 py-2 text-base/7 font-semibold text-gray-900 hover:bg-gray-400/10">Timeline</a>
                <a href="/map" class="-mx-3 block rounded-lg px-3 py-2 text-base/7 font-semibold text-gray-900 hover:bg-gray-400/10">Map</a>
                <a href="#" class="-mx-3 block rounded-lg px-3 py-2 text-base/7 font-semibold text-gray-900 hover:bg-gray-400/10">Company</a>
              </div>
            </div>
          </div>
        </div>      
      </header>

      <main class="w-full max-w-6xl mx-auto px-4 py-8">
        <!-- ZENTRIERTER TITEL -->
        <div class="mx-auto max-w-2xl text-center">
            <h2 class="text-4xl font-semibold tracking-tight text-pretty text-gray-900 sm:text-5xl">Map</h2>
        </div>

        <!-- VOLLBREITE KARTE -->
        <div class="mt-10 border-t border-gray-200 pt-10 sm:mt-16 sm:pt-16">
            <div class="w-full h-[600px]">
                <div id="map" class="w-full h-full rounded-lg shadow"></div>
            </div>
        </div>
      </main>
    </div>
    <script type="text/javascript" src="{{themepath}}/js/nav.js"></script>
    <script type="text/javascript" src="{{themepath}}/js/map.js"></script>
    <script>
  const points = {{ points|json_encode|raw }};
const map = L.map('map');

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

const markers = L.markerClusterGroup();

points.forEach(p => {
  if (p.lat && p.lng) {
    const marker = L.marker([p.lat, p.lng]);
    marker.bindPopup(`
      <strong>${p.title}</strong><br>
      ${p.description}<br>
      <img src="${p.image}" alt="" style="max-width: 200px; margin-top: 5px;">
    `);
    markers.addLayer(marker);
  }
});

map.addLayer(markers);
map.fitBounds(markers.getBounds(), {
  padding: [50, 50],
  maxZoom: 15
});
</script>
</body>
</html>
